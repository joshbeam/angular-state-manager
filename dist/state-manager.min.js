!function(){"use strict";angular.module("stateManager",[])}(),function(){"use strict";function t(){function t(){return this.states=[],this.$scope={},angular.forEach(arguments,function(t){this.states.push(new i(t))}.bind(this)),function(t){return t?this.states.filter(function(i){return i.$name===t})[0]:this}.bind(this)}function i(t){this.$name=t.name,this.$start=t.start||null,this.$stop=t.stop||null,this.$done=t.done||null,this.$subject=t.subject||{},this.$active=!1,this.$model="",this.$exclusiveOf=[],this.$auxillary=t.auxillary||{},this.$scope={}}function s(){return this.states}function e(){var t=Array.prototype.slice.call(arguments);angular.forEach(t,function(i){var s=this.states.filter(function(t){return t.$name===i})[0],e=t.filter(function(t){return t!==s.$name});angular.forEach(e,function(t){s.$exclusiveOf.push(this.states.filter(function(i){return i.$name===t})[0])}.bind(this))}.bind(this))}function n(t){return t?(this.$scope=t,void angular.forEach(this.states,function(i){i.$scope=t})):this.$scope}function o(){var t=[];return angular.forEach(this.states,function(i){t.push(i.$model)}),t}function r(t){return t in this?this[t]:void 0}function u(t){var i={},s={},e={};t&&(i=t,"subject"in i&&(s=i.subject),"model"in i&&(e=i.model)),this.isActive()&&(this.model({}),this.stop());var n=null;return this.$active=!0,this.$subject=s,this.$model=e,e.constructor!==Object&&"string"==typeof e&&(n=b.getStringModelToModel(this,this.$scope,e)),angular.forEach(this.$exclusiveOf,function(t){t.isActive()&&t.stop()}.bind(this)),null!==this.$start?this.$start(this.$subject,n):void 0}function c(t){return this.$active=!1,this.$subject=t?this.$subject:{},this.$model="",null!==this.$stop?this.$stop():void 0}function a(t){var i=b.getStringModelToModel(this,this.$scope,this.$model);return null!==this.$done&&this.$done(this.$subject,i),this.stop(t),this}function h(t){if(t)this.$subject=t;else if(!t)return this.$subject}function l(t){if(!("string"==typeof this.$model&&Object.keys(this.$scope).length>0&&b.getStringModelToModel(this,this.$scope,this.$model)!==!1))return!1;if(t||""===t)b.setStringModelToModel(this,this.$scope,this.$model,t);else if(!t)return this.$model}function f(){return this.$active}function $(){angular.forEach(arguments,function(t){if(t.constructor!==Object)t in this.$auxillary&&this.$auxillary[t].call(this,this.$subject);else if(t.constructor===Object)for(var i in t)t[i].constructor!==Array&&(t[i]=[t[i]]),t[i].unshift(this.$subject),this.$auxillary[i].apply(this,t[i])}.bind(this))}function d(t,i,s){var e,n=!1;return"string"==typeof s&&(e=s.split("."),e.shift(),angular.forEach(e,function(t){n=n?n[t]:i[t]}.bind(t))),n?n:!1}function p(t,i,s,e){var n,o,r;"string"==typeof s&&(o=s.split("."),o.shift(),r=o.pop(),angular.forEach(o,function(t){n=n?n[t]:i[t]}.bind(t)),n[r]=e)}var g={StateGroup:t,State:i},b={getStringModelToModel:d,setStringModelToModel:p};return t.prototype={getAll:s,exclusive:e,scope:n,models:o},i.prototype={get:r,start:u,stop:c,done:a,subject:h,model:l,isActive:f,and:$},g}angular.module("stateManager").factory("stateManager",t)}();