/* angular-state-manager ||| (c) 2015 Joshua Beam ||| github.com/joshbeam ||| joshua.a.beam@gmail.com ||| (MIT) License */!function(t){"use strict";var e={};t.stateManagerDependencies=e}(window),function(t){"use strict";function e(t,e,n){var i,r=!1;return"string"==typeof n&&(i=n.split("."),i.shift(),s(i,function(t){r=r?r[t]:e[t]}.bind(t))),r?r:!1}function n(t,e,n){var s,r,o=t;if("string"==typeof e){if(s=e.split("."),s.shift(),s.length<2)throw new SyntaxError(i.constants.errors.syntax.ILLEGAL_MODEL_STRING);for(var c=0;c<s.length;c++)0===c&&(o[s[0]]={},r=o[s[0]]),c>0&&c<s.length-1&&(r[s[c]]={},r=r[s[c]]),c===s.length-1&&(r[s[c]]=n)}}function s(t,e){var n,s=0;if(!t||t.constructor!==Array)throw new SyntaxError(i.constants.errors.syntax.ILLEGAL_ARRAY);if(!e||e.constructor!==Function)throw new SyntaxError(i.constants.errors.syntax.ILLEGAL_FUNCTION);for(n=t.length;n>s;s++)e.call(t,t[s],s)}var i={getStringModelToModel:e,setStringModelToModel:n,forEach:s,constants:{errors:{syntax:{ILLEGAL_MODEL_STRING:"A model should be prefixed with [scope].models",ILLEGAL_FUNCTION:"A Function is required",ILLEGAL_ARRAY:"An Array is required"},type:{ILLEGAL_SUBJECT:'A subject should be of type "object"',ILLEGAL_CONFIG_BOOL:"must contain a boolean value"}}}};t.utils=i}(stateManagerDependencies),function(t){"use strict";function e(t){this.$name=t.name,this.$start=t.start||null,this.$stop=t.stop||null,this.$done=t.done||null,this.$subject=t.subject||{},this.$active=!1,this.$model="",this.$exclusiveOf=[],this.$children=[],this.$auxillary=t.auxillary||null,this.$scope={}}function n(t){return t in this?this[t]:void 0}function s(t){var e={},n={},s={},i={};if(t){if(e=t,"subject"in e){if("object"!=typeof e.subject)throw new TypeError(h.constants.errors.type.ILLEGAL_SUBJECT);n=e.subject}if("model"in e){if("string"!=typeof e.model)throw new TypeError('$model must be of type "string"');if(e.model.split(".").length<3)throw new SyntaxError(h.constants.errors.syntax.ILLEGAL_MODEL_STRING);s=e.model}"event"in e&&(i=e.event)}this.isActive()&&(this.model({}),this.stop());var r=null;return this.$active=!0,this.$subject=n,this.$model=s,s.constructor!==Object&&"string"==typeof s&&(r=h.getStringModelToModel(this,this.$scope,s)),h.forEach(this.$exclusiveOf,function(t){t.isActive()&&t.stop()}),h.forEach(this.$children,function(t){t.isActive()&&t.stop()}),null!==this.$start?this.$start(this.$subject,r,i):void 0}function i(t){var e;return t?("keepSubject"in t&&(this.$subject=t.keepSubject===!0?this.$subject:{}),"event"in t&&(e=t.event)):this.$subject={},""!==this.$model&&(this.model(""),this.$model=""),this.$active===!0&&(this.$active=!1),null!==this.$stop?this.$stop(e):void 0}function r(t){var e,n=!1,s=!1,i=!0;if(t){if("keepSubject"in t){if("boolean"!=typeof t.keepSubject)throw new TypeError("keepSubject "+h.constants.errors.type.ILLEGAL_CONFIG_BOOL);n=t.keepSubject}if("stop"in t){if("boolean"!=typeof t.stop)throw new TypeError("stop "+h.constants.errors.type.ILLEGAL_CONFIG_BOOL);i=t.stop}if("keepModel"in t){if("boolean"!=typeof t.keepModel)throw new TypeError("keepModel "+h.constants.errors.type.ILLEGAL_CONFIG_BOOL);s=t.keepModel}"event"in t&&(e=t.event)}var r=h.getStringModelToModel(this,this.$scope,this.$model);return null!==this.$done&&this.$done(this.$subject,r,e),s===!1&&this.model(""),i===!0&&this.stop({keepSubject:n,event:e}),this}function o(t){if(t)this.$subject=t;else if(!t)return this.$subject}function c(t){return t||""===t?"string"==typeof this.$model&&Object.keys(this.$scope).length>0?(h.setStringModelToModel(this.$scope,this.$model,t),!0):t?void 0:!1:this.$model}function u(){return this.$active}function a(){h.forEach(arguments,function(t){if(t.constructor!==Object)t in this.$auxillary&&this.$auxillary[t].call(this,this.$subject);else if(t.constructor===Object)for(var e in t)t[e].constructor!==Array&&(t[e]=[t[e]]),t[e].unshift(this.$subject),this.$auxillary[e].apply(this,t[e])}.bind(this))}var h=t.utils;e.prototype={get:n,start:s,stop:i,done:r,subject:o,model:c,isActive:u,and:a},t.State=e}(stateManagerDependencies),function(t){"use strict";function e(t){return this.states=[],this.states.count=function(){return this.length},this.$scope={},this.$name=t,function(t){return t?this.states.filter(function(e){return e.$name===t})[0]:this}.bind(this)}function n(t){var e;return t&&t.constructor===Function&&(e=t(this.$name,this.states)),this.states.push(new c(e)),this}function s(){return this.states}function i(t){function e(t){return t?(this.$scope=t,void o.forEach(this.states,function(e){e.$scope=t})):this.$scope}function n(){var t=Array.prototype.slice.call(arguments);o.forEach(t,function(e){var n=this.states.filter(function(t){return t.$name===e})[0],s=t.filter(function(t){return t!==n.$name});o.forEach(s,function(t){n.$exclusiveOf.push(this.states.filter(function(e){return e.$name===t})[0])}.bind(this))}.bind(this))}function s(t){function e(t){return t.$name===s}function n(t){c=this.states.filter(function(e){return e.$name===t})[0],r.$children.push(c)}var s,r,c;for(s in t)r=this.states.filter(e)[0],i.children[s].constructor===Array?o.forEach(i.children[s],n.bind(this)):n(i.children[s])}var i,r,c=0;if(!t||t.constructor!==Function)throw new TypeError("Function object must be passed into StateGroup.prototype.config");i=t();for(var u in i)if("scope"!==u&&"exclusive"!==u&&"children"!==u)throw new SyntaxError(u+" cannot be set in .config()");"scope"in i&&e.call(this,i.scope),"exclusive"in i&&i.exclusive.constructor===Array&&(o.forEach(i.exclusive,function(t){t.constructor===Array?(r="array",c++):"string"==typeof t&&(r="string")}.bind(this)),c===i.exclusive.length&&"array"===r?o.forEach(i.exclusive,function(t){n.apply(this,t)}.bind(this)):"string"===r&&n.apply(this,i.exclusive)),"children"in i&&s.call(this,i.children)}function r(){var t=[];return o.forEach(this.states,function(e){t.push(e.$model)}),t}var o=t.utils,c=t.State;e.prototype={state:n,getAll:s,config:i,models:r},t.StateGroup=e}(stateManagerDependencies),function(t){"use strict";function e(){function t(t){var e=new n(t);return s.push(e),e}function e(){return this.groups}var s=[],i={group:t,getAllGroups:e};return i}var n=t.StateGroup;t.stateManager=e}(stateManagerDependencies),function(t){"use strict";t.module("stateManager",[])}(angular),function(t,e){"use strict";t.factory("stateManager",e)}(angular.module("stateManager"),stateManagerDependencies.stateManager);