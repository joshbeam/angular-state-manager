/* angular-state-manager ||| (C) 2015 Joshua Beam ||| github.com/joshbeam ||| joshua.a.beam@gmail.com ||| (MIT) License */!function(t){"use strict";function e(t,e,n){var i,s=!1;return"string"==typeof n&&(i=n.split("."),i.shift(),angular.forEach(i,function(t){s=s?s[t]:e[t]}.bind(t))),s?s:!1}function n(t,e,n){var s,o,r=t;if("string"==typeof e){if(s=e.split("."),s.shift(),s.length<2)throw new SyntaxError(i.constants.errors.syntax.ILLEGAL_MODEL_STRING);for(var c=0;c<s.length;c++)0===c&&(r[s[0]]={},o=r[s[0]]),c>0&&c<s.length-1&&(o[s[c]]={},o=o[s[c]]),c===s.length-1&&(o[s[c]]=n)}}var i={getStringModelToModel:e,setStringModelToModel:n,constants:{errors:{syntax:{ILLEGAL_MODEL_STRING:"A model should be prefixed with [scope].models"},type:{ILLEGAL_SUBJECT:'A subject should be of type "object"',ILLEGAL_CONFIG_BOOL:"must contain a boolean value"}}}};t.utils=i}(window),function(t,e,n){"use strict";function i(t){this.$name=t.name,this.$start=t.start||null,this.$stop=t.stop||null,this.$done=t.done||null,this.$subject=t.subject||{},this.$active=!1,this.$model="",this.$exclusiveOf=[],this.$children=[],this.$auxillary=t.auxillary||null,this.$scope={}}function s(t){return t in this?this[t]:void 0}function o(n){var i={},s={},o={},r={};if(n){if(i=n,"subject"in i){if("object"!=typeof i.subject)throw new TypeError(e.constants.errors.type.ILLEGAL_SUBJECT);s=i.subject}if("model"in i){if("string"!=typeof i.model)throw new TypeError('$model must be of type "string"');if(i.model.split(".").length<3)throw new SyntaxError(e.constants.errors.syntax.ILLEGAL_MODEL_STRING);o=i.model}"event"in i&&(r=i.event)}this.isActive()&&(this.model({}),this.stop());var c=null;return this.$active=!0,this.$subject=s,this.$model=o,o.constructor!==Object&&"string"==typeof o&&(c=e.getStringModelToModel(this,this.$scope,o)),t.forEach(this.$exclusiveOf,function(t){t.isActive()&&t.stop()}),t.forEach(this.$children,function(t){t.isActive()&&t.stop()}),null!==this.$start?this.$start(this.$subject,c,r):void 0}function r(t){var e;return t?("keepSubject"in t&&(this.$subject=t.keepSubject===!0?this.$subject:{}),"event"in t&&(e=t.event)):this.$subject={},""!==this.$model&&(this.model(""),this.$model=""),this.$active===!0&&(this.$active=!1),null!==this.$stop?this.$stop(e):void 0}function c(t){var n,i=!1,s=!1,o=!0;if(t){if("keepSubject"in t){if("boolean"!=typeof t.keepSubject)throw new TypeError("keepSubject "+e.constants.errors.type.ILLEGAL_CONFIG_BOOL);i=t.keepSubject}if("stop"in t){if("boolean"!=typeof t.stop)throw new TypeError("stop "+e.constants.errors.type.ILLEGAL_CONFIG_BOOL);o=t.stop}if("keepModel"in t){if("boolean"!=typeof t.keepModel)throw new TypeError("keepModel "+e.constants.errors.type.ILLEGAL_CONFIG_BOOL);s=t.keepModel}"event"in t&&(n=t.event)}var r=e.getStringModelToModel(this,this.$scope,this.$model);return null!==this.$done&&this.$done(this.$subject,r,n),s===!1&&this.model(""),o===!0&&this.stop({keepSubject:i,event:n}),this}function u(t){if(t)this.$subject=t;else if(!t)return this.$subject}function h(t){return t||""===t?"string"==typeof this.$model&&Object.keys(this.$scope).length>0?(e.setStringModelToModel(this.$scope,this.$model,t),!0):t?void 0:!1:this.$model}function a(){return this.$active}function l(){t.forEach(arguments,function(t){if(t.constructor!==Object)t in this.$auxillary&&this.$auxillary[t].call(this,this.$subject);else if(t.constructor===Object)for(var e in t)t[e].constructor!==Array&&(t[e]=[t[e]]),t[e].unshift(this.$subject),this.$auxillary[e].apply(this,t[e])}.bind(this))}i.prototype={get:s,start:o,stop:r,done:c,subject:u,model:h,isActive:a,and:l},n.State=i}(angular,utils,window),function(t,e,n){"use strict";function i(t){return this.states=[],this.states.count=function(){return this.length},this.$scope={},this.$name=t,function(t){return t?this.states.filter(function(e){return e.$name===t})[0]:this}.bind(this)}function s(t){var n;return t&&t.constructor===Function&&(n=t(this.$name,this.states)),this.states.push(new e(n)),this}function o(){return this.states}function r(e){function n(e){return e?(this.$scope=e,void t.forEach(this.states,function(t){t.$scope=e})):this.$scope}function i(){var e=Array.prototype.slice.call(arguments);t.forEach(e,function(n){var i=this.states.filter(function(t){return t.$name===n})[0],s=e.filter(function(t){return t!==i.$name});t.forEach(s,function(t){i.$exclusiveOf.push(this.states.filter(function(e){return e.$name===t})[0])}.bind(this))}.bind(this))}function s(e){function n(t){return t.$name===s}function i(t){c=this.states.filter(function(e){return e.$name===t})[0],r.$children.push(c)}var s,r,c;for(s in e)r=this.states.filter(n)[0],o.children[s].constructor===Array?t.forEach(o.children[s],i.bind(this)):i(o.children[s])}var o,r,c=0;if(!e||e.constructor!==Function)throw new TypeError("Function object must be passed into StateGroup.prototype.config");o=e();for(var u in o)if("scope"!==u&&"exclusive"!==u&&"children"!==u)throw new SyntaxError(u+" cannot be set in .config()");"scope"in o&&n.call(this,o.scope),"exclusive"in o&&o.exclusive.constructor===Array&&(t.forEach(o.exclusive,function(t){t.constructor===Array?(r="array",c++):"string"==typeof t&&(r="string")}.bind(this)),c===o.exclusive.length&&"array"===r?t.forEach(o.exclusive,function(t){i.apply(this,t)}.bind(this)):"string"===r&&i.apply(this,o.exclusive)),"children"in o&&s.call(this,o.children)}function c(){var e=[];return t.forEach(this.states,function(t){e.push(t.$model)}),e}i.prototype={state:s,getAll:o,config:r,models:c},n.StateGroup=i}(angular,State,window),function(t){"use strict";t.module("stateManager",[])}(angular),function(t,e){"use strict";function n(){function t(t){var n=new e(t);return i.push(n),n}function n(){return this.groups}var i=[],s={group:t,getAllGroups:n};return s}t.module("stateManager").factory("stateManager",n)}(angular,window.StateGroup,window);