!function(t){"use strict";t.module("stateManager",[])}(angular),function(t){"use strict";function i(){function i(){return this.states=[],this.$scope={},t.forEach(arguments,function(t){this.states.push(new s(t))}.bind(this)),function(t){return t?this.states.filter(function(i){return i.$name===t})[0]:this}.bind(this)}function s(t){this.$name=t.name,this.$start=t.start||null,this.$stop=t.stop||null,this.$done=t.done||null,this.$subject=t.subject||{},this.$active=!1,this.$model="",this.$exclusiveOf=[],this.$auxillary=t.auxillary||{},this.$scope={}}function e(){return this.states}function n(i){function s(i){return i?(this.$scope=i,void t.forEach(this.states,function(t){t.$scope=i})):this.$scope}function e(){var i=Array.prototype.slice.call(arguments);t.forEach(i,function(s){var e=this.states.filter(function(t){return t.$name===s})[0],n=i.filter(function(t){return t!==e.$name});t.forEach(n,function(t){e.$exclusiveOf.push(this.states.filter(function(i){return i.$name===t})[0])}.bind(this))}.bind(this))}var n,o,r=0;i&&i.constructor===Function&&(n=i(),"scope"in n&&s.call(this,n.scope),"exclusive"in n&&n.exclusive.constructor===Array&&(t.forEach(n.exclusive,function(t){t.constructor===Array?(o="array",r++):"string"==typeof t&&(o="string")}.bind(this)),r===n.exclusive.length&&"array"===o?t.forEach(n.exclusive,function(t){e.apply(this,t)}.bind(this)):"string"===o&&e.apply(this,n.exclusive)))}function o(){var i=[];return t.forEach(this.states,function(t){i.push(t.$model)}),i}function r(t){return t in this?this[t]:void 0}function c(i){var s={},e={},n={};i&&(s=i,"subject"in s&&(e=s.subject),"model"in s&&(n=s.model)),this.isActive()&&(this.model({}),this.stop());var o=null;return this.$active=!0,this.$subject=e,this.$model=n,n.constructor!==Object&&"string"==typeof n&&(o=g.getStringModelToModel(this,this.$scope,n)),t.forEach(this.$exclusiveOf,function(t){t.isActive()&&t.stop()}.bind(this)),null!==this.$start?this.$start(this.$subject,o):void 0}function u(t){return this.$active=!1,this.$subject=t?this.$subject:{},this.$model="",null!==this.$stop?this.$stop():void 0}function h(t){var i=g.getStringModelToModel(this,this.$scope,this.$model);return null!==this.$done&&this.$done(this.$subject,i),this.stop(t),this}function a(t){if(t)this.$subject=t;else if(!t)return this.$subject}function l(t){return t||""===t?"string"==typeof this.$model&&Object.keys(this.$scope).length>0?(g.setStringModelToModel(this.$scope,this.$model,t),!0):t?void 0:!1:this.$model}function f(){return this.$active}function $(){t.forEach(arguments,function(t){if(t.constructor!==Object)t in this.$auxillary&&this.$auxillary[t].call(this,this.$subject);else if(t.constructor===Object)for(var i in t)t[i].constructor!==Array&&(t[i]=[t[i]]),t[i].unshift(this.$subject),this.$auxillary[i].apply(this,t[i])}.bind(this))}function d(i,s,e){var n,o=!1;return"string"==typeof e&&(n=e.split("."),n.shift(),t.forEach(n,function(t){o=o?o[t]:s[t]}.bind(i))),o?o:!1}function p(t,i,s){var e,n,o=t;if("string"==typeof i){e=i.split("."),e.shift();for(var r=0;r<e.length;r++)0===r&&(o[e[0]]={},n=o[e[0]]),r>0&&r<e.length-1&&(n[e[r]]={},n=n[e[r]]),r===e.length-1&&(n[e[r]]=s)}}var v={StateGroup:i,State:s},g={getStringModelToModel:d,setStringModelToModel:p};return i.prototype={getAll:e,models:o,config:n},s.prototype={get:r,start:c,stop:u,done:h,subject:a,model:l,isActive:f,and:$},v}t.module("stateManager").factory("stateManager",i)}(angular);